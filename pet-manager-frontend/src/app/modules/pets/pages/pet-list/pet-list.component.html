<div class="p-6 bg-gray-50 min-h-screen">
  <div class="max-w-6xl mx-auto">
    
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-3xl font-bold text-blue-800">Gerenciador de Pets ğŸ¾</h1>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-md mb-8 border-t-4" [ngClass]="isEditing ? 'border-orange-500' : 'border-blue-500'">
      <h2 class="text-xl font-semibold mb-4 text-gray-700">
        {{ isEditing ? 'âœï¸ Editando Pet' : 'âœ¨ Adicionar Novo Pet' }}
      </h2>
      
      <form [formGroup]="petForm" (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-gray-700">Nome</label>
          <input formControlName="nome" type="text" class="mt-1 w-full p-2 border rounded">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">EspÃ©cie</label>
          <input formControlName="especie" type="text" placeholder="Ex: CÃ£o" class="mt-1 w-full p-2 border rounded">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">RaÃ§a</label>
          <input formControlName="raca" type="text" class="mt-1 w-full p-2 border rounded">
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700">Idade</label>
          <input formControlName="idade" type="number" class="mt-1 w-full p-2 border rounded">
        </div>

        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-gray-700">Foto do Pet</label>
          <input type="file" (change)="onFileSelected($event)" class="mt-1 w-full p-2 border rounded text-sm text-gray-500">
        </div>

        <div class="md:col-span-4 flex gap-2 mt-2">
          <button type="submit" [disabled]="petForm.invalid"
                  [ngClass]="isEditing ? 'bg-orange-600 hover:bg-orange-700' : 'bg-green-600 hover:bg-green-700'"
                  class="flex-1 text-white font-bold py-2 px-4 rounded disabled:bg-gray-400 transition">
            {{ isEditing ? 'Salvar AlteraÃ§Ãµes' : 'Cadastrar Pet' }}
          </button>
          
          <button *ngIf="isEditing" type="button" (click)="onCancelEdit()"
                  class="bg-gray-500 text-white font-bold py-2 px-4 rounded hover:bg-gray-600">
            Cancelar
          </button>
        </div>
      </form>
    </div>

    <div class="flex gap-2 mb-6">
      <input [(ngModel)]="filtroNome" (keyup.enter)="onSearch()" 
             type="text" placeholder="ğŸ” Buscar pet por nome..." 
             class="flex-1 p-3 border rounded shadow-sm">
      <button (click)="onSearch()" class="bg-blue-600 text-white px-6 rounded hover:bg-blue-700">Buscar</button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      <div *ngFor="let pet of facade.pets$ | async" 
           class="bg-white rounded-lg shadow hover:shadow-xl transition duration-300 overflow-hidden flex flex-col">
        
        <div class="h-48 bg-gray-200 w-full flex items-center justify-center overflow-hidden relative">
           <img *ngIf="pet.foto" [src]="pet.foto" alt="Foto do Pet" class="w-full h-full object-cover">
           <span *ngIf="!pet.foto" class="text-4xl">ğŸ¶</span>
        </div>

        <div class="p-4 flex-1">
          <div class="flex justify-between items-start">
            <h3 class="text-xl font-bold text-gray-800 mb-1">{{ pet.nome }}</h3>
            <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">{{ pet.idade }} anos</span>
          </div>
          <p class="text-gray-600 text-sm mb-4">{{ pet.especie }} â€¢ {{ pet.raca }}</p>
          
          <button (click)="onEdit(pet)" class="w-full mt-auto bg-blue-50 text-blue-600 border border-blue-200 py-2 rounded hover:bg-blue-100 transition">
            Editar / Foto
          </button>
        </div>
      </div>
    </div>

    <div *ngIf="(facade.pets$ | async)?.length === 0" class="text-center text-gray-500 py-12 bg-white rounded shadow-sm">
      <p class="text-xl mb-2">Nenhum pet encontrado. ğŸ˜¢</p>
      <p class="text-sm">Tente buscar outro nome ou cadastre um novo.</p>
    </div>

    <div class="flex justify-center items-center gap-4 mt-8" *ngIf="(facade.pets$ | async)?.length !== 0">
      <button (click)="mudarPagina(-1)" [disabled]="facade.currentPage === 0"
              class="bg-white border px-4 py-2 rounded shadow hover:bg-gray-50 disabled:opacity-50">
        â¬…ï¸ Anterior
      </button>
      
      <span class="font-semibold text-gray-700">PÃ¡gina {{ facade.currentPage + 1 }}</span>

      <button (click)="mudarPagina(1)"
              class="bg-white border px-4 py-2 rounded shadow hover:bg-gray-50">
        PrÃ³ximo â¡ï¸
      </button>
    </div>

  </div>
</div>
